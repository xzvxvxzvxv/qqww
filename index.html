<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>èº«ä»½è¯æ‰“å°</title>
  <style>
    /* æ›´æ–°é€šçŸ¥å¼¹çª—æ ·å¼ */
    .update-notification {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .notification-content {
      background-color: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);
      width: 90%;
      max-width: 500px;
      position: relative;
    }
    
    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding-bottom: 10px;
      border-bottom: 1px solid #eee;
    }
    
    .notification-title {
      margin: 0;
      color: #333;
      font-size: 1.2rem;
    }
    
    .close-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
      transition: color 0.3s;
    }
    
    .close-btn:hover {
      color: #333;
    }
    
    .notification-body {
      margin-bottom: 20px;
      line-height: 1.6;
    }
    
    .notification-footer {
      text-align: right;
    }
    
    .confirm-btn {
      background-color: #4CAF50;
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    
    .confirm-btn:hover {
      background-color: #45a049;
    }
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
      background: #f0f0f0;
    }

    .upload-area {
      margin-bottom: 20px;
    }

    .upload-area input {
      margin: 10px;
    }

    .id-card {
      width: 300px;
      margin: 20px auto;
      background: #fff;
      padding: 10px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
    }

    .household-book {
      width: 450px; /* æ¯”èº«ä»½è¯å¤§50% */
      margin: 20px auto;
      background: #fff;
      padding: 15px;
      box-shadow: 0 0 5px rgba(0,0,0,0.2);
    }

    .household-book img {
      width: 100%;
      display: block;
      margin: 0 auto;
    }

    @media print {
      body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        min-height: 100vh;
      }
      .actions, .upload-area {
        display: none !important;
      }
      .id-card {
        margin: auto;
        box-shadow: none;
      }
      body.print-black .id-card img,
      body.print-black .household-book img {
        filter: grayscale(100%);
      }

      .household-book {
        margin: auto;
        box-shadow: none;
        width: 80%; /* æ‰“å°æ—¶å é¡µé¢å®½åº¦çš„80% */
      }
    }

    .id-card img {
      width: 100%;
      display: block;
      margin: 10px auto;
    }

    .actions {
      margin-top: 20px;
    }

    .actions button {
      background-color: #4CAF50; /* ç»¿è‰²èƒŒæ™¯ */
      border: none;
      color: white;
      padding: 12px 24px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 4px 2px;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s ease, transform 0.1s ease;
    }

    .actions button:hover {
      background-color: #45a049; /* æ·±ç»¿è‰²èƒŒæ™¯ */
    }

    .actions button:active {
      background-color: #3e8e41;
      transform: translateY(2px);
    }

    @media print {
      .actions, .upload-area {
        display: none !important;
      }
    }
  </style>
</head>
<body>
  <div class="upload-area">
    <label>è¯ä»¶ç±»å‹: </label>
    <label><input type="radio" name="idType" value="idCard" checked> èº«ä»½è¯</label>
    <label><input type="radio" name="idType" value="bankCard"> é“¶è¡Œå¡</label>
    <label><input type="radio" name="idType" value="householdBook"> æˆ·å£ç°¿</label><br><br>

    <div id="idCardUploads">
      <label>ä¸Šä¼ æ­£é¢ç…§ç‰‡: <input type="file" id="frontUpload" accept="image/*"></label><br>
      <label>ä¸Šä¼ åé¢ç…§ç‰‡: <input type="file" id="backUpload" accept="image/*"></label><br><br>
    </div>

    <div id="bankCardUploads" style="display: none;">
      <label>ä¸Šä¼ é“¶è¡Œå¡ç…§ç‰‡: <input type="file" id="bankCardUpload" accept="image/*"></label><br><br>
    </div>

    <div id="householdBookUploads" style="display: none;">
      <label>ä¸Šä¼ æˆ·å£ç°¿ç…§ç‰‡: <input type="file" id="householdBookUpload" accept="image/*"></label><br><br>
    </div>

    <label>æ‰“å°é¢œè‰²: </label>
    <label><input type="radio" name="printColor" value="color" checked> å½©è‰²</label>
    <label><input type="radio" name="printColor" value="black"> é»‘è‰²</label>
  </div>

  <div id="idCard" class="id-card" style="display: block;">
    <img id="frontImage" src="" alt="æ­£é¢èº«ä»½è¯">
    <img id="backImage" src="" alt="åé¢èº«ä»½è¯">
  </div>

  <div id="bankCard" class="id-card" style="display: none;">
    <img id="bankCardImage" src="" alt="é“¶è¡Œå¡">
  </div>

  <div id="householdBook" class="household-book" style="display: none;">
    <img id="householdBookImage" src="" alt="æˆ·å£ç°¿">
  </div>

  <div class="actions">
    <button onclick="printPage()">æ‰“å°</button>
    <button onclick="downloadPDF()">è¾“å‡º PDF</button>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
  <script>
    // æ˜¾ç¤ºä¸Šä¼ çš„å›¾ç‰‡
    // è¯ä»¶ç±»å‹åˆ‡æ¢
    const idTypeRadios = document.querySelectorAll('input[name="idType"]');
    idTypeRadios.forEach(radio => {
      radio.addEventListener('change', function() {
        if (this.value === 'idCard') {
          document.getElementById('idCardUploads').style.display = 'block';
          document.getElementById('bankCardUploads').style.display = 'none';
          document.getElementById('householdBookUploads').style.display = 'none';
          document.getElementById('idCard').style.display = 'block';
          document.getElementById('bankCard').style.display = 'none';
          document.getElementById('householdBook').style.display = 'none';
        } else if (this.value === 'bankCard') {
          document.getElementById('idCardUploads').style.display = 'none';
          document.getElementById('bankCardUploads').style.display = 'block';
          document.getElementById('householdBookUploads').style.display = 'none';
          document.getElementById('idCard').style.display = 'none';
          document.getElementById('bankCard').style.display = 'block';
          document.getElementById('householdBook').style.display = 'none';
        } else {
          document.getElementById('idCardUploads').style.display = 'none';
          document.getElementById('bankCardUploads').style.display = 'none';
          document.getElementById('householdBookUploads').style.display = 'block';
          document.getElementById('idCard').style.display = 'none';
          document.getElementById('bankCard').style.display = 'none';
          document.getElementById('householdBook').style.display = 'block';
        }
      });
    });

    // èº«ä»½è¯å›¾ç‰‡ä¸Šä¼ 
    document.getElementById('frontUpload').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => document.getElementById('frontImage').src = reader.result;
        reader.readAsDataURL(file);
      }
    });

    document.getElementById('backUpload').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => document.getElementById('backImage').src = reader.result;
        reader.readAsDataURL(file);
      }
    });

    // é“¶è¡Œå¡å›¾ç‰‡ä¸Šä¼ 
    document.getElementById('bankCardUpload').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => document.getElementById('bankCardImage').src = reader.result;
        reader.readAsDataURL(file);
      }
    });

    // æˆ·å£ç°¿å›¾ç‰‡ä¸Šä¼ 
    document.getElementById('householdBookUpload').addEventListener('change', function (e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = () => document.getElementById('householdBookImage').src = reader.result;
        reader.readAsDataURL(file);
      }
    });

    // æ‰“å°
    function printPage() {
      // æ£€æŸ¥ç”¨æˆ·é€‰æ‹©çš„æ‰“å°é¢œè‰²
      const colorOption = document.querySelector('input[name="printColor"]:checked').value;
      const idType = document.querySelector('input[name="idType"]:checked').value;
      
      // æ ¹æ®é€‰æ‹©åº”ç”¨ä¸åŒçš„æ ·å¼
      if (colorOption === 'black') {
        document.body.classList.add('print-black');
      } else {
        document.body.classList.remove('print-black');
      }
      
      // æ‰§è¡Œæ‰“å°
      window.print();
    }

    // ä¸‹è½½ PDF
    function downloadPDF() {
      const element = document.getElementById('idCard');
      const opt = {
        margin:       0.5,
        filename:     'èº«ä»½è¯æ‰“å°.pdf',
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2 },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
      };
      html2pdf().set(opt).from(element).save();
    }
  </script>
<!-- æ›´æ–°é€šçŸ¥å¼¹çª— -->
  <div id="updateNotification" class="update-notification">
    <div class="notification-content">
      <div class="notification-header">
        <h3 class="notification-title">åŠŸèƒ½æ›´æ–°é€šçŸ¥</h3>
        <button class="close-btn" onclick="closeNotification()">&times;</button>
      </div>
      <div class="notification-body">
        <p>äº²çˆ±çš„ç”¨æˆ·ï¼Œæˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒï¼Œæˆ·å£ç°¿åŠŸèƒ½å·²å®Œæˆä»¥ä¸‹æ›´æ–°3é¡¹ï¼š</p>
        <ul>
          <li>ä¼˜åŒ–äº†æˆ·å£ç°¿å›¾ç‰‡çš„æ˜¾ç¤ºæ•ˆæœ</li>
          <li>æ”¹è¿›äº†æ‰“å°é€‚é…ï¼Œç¡®ä¿æˆ·å£ç°¿æ‰“å°æ›´åŠ æ¸…æ™°</li>
          <li>å¢åŠ äº†å¯¹ä¸åŒå°ºå¯¸æˆ·å£ç°¿çš„å…¼å®¹æ€§</li>
        </ul>
        <p>æ„Ÿè°¢æ‚¨ä½¿ç”¨â˜ºï¸ğŸ˜ŠğŸ˜©ğŸ˜­ğŸ˜˜â˜ºï¸â¤ï¸ğŸ˜‚ğŸ‘Œæˆ‘ä»¬çš„è¯ä»¶æ‰“å°æœåŠ¡!</p>
      </div>
      <div class="notification-footer">
        <button class="confirm-btn" onclick="closeNotification()">æˆ‘çŸ¥é“äº†</button>
      </div>
    </div>
  </div>

  <script>
    // å…³é—­é€šçŸ¥å¼¹çª—
    function closeNotification() {
      document.getElementById('updateNotification').style.display = 'none';
      // å¯é€‰ï¼šä½¿ç”¨localStorageè®°å½•ç”¨æˆ·å·²å…³é—­å¼¹çª—
      localStorage.setItem('updateNotificationSeen', 'true');
    }

    // é¡µé¢åŠ è½½å®Œæˆåæ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºå¼¹çª—
    document.addEventListener('DOMContentLoaded', function() {
      // å¯é€‰ï¼šæ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²ç»å…³é—­è¿‡å¼¹çª—
      const hasSeenNotification = localStorage.getItem('updateNotificationSeen');
      if (!hasSeenNotification) {
        document.getElementById('updateNotification').style.display = 'flex';
      }
    });
  </script>
</body>
</html>
